# ğŸ“Š TaxCredit-Visual í”„ë¡œì íŠ¸ ê·œì¹™ (2025-06-29 ë²„ì „)

## ğŸ“‹ **í”„ë¡œì íŠ¸ ê°œìš”**
- **í”„ë¡œì íŠ¸ëª…**: TaxCredit-Visual (ê¸°ì—… ì •ë³´ ì‹œê°í™” í”Œë«í¼)
- **ìœ í˜•**: React JavaScript ì›¹ì•± (Partner ë²„ì „)
- **ë°°í¬ í™˜ê²½**: Azure Static Web Apps
- **ì ‘ê·¼ ë ˆë²¨**: Partner (ìƒì„¸ ì •ë³´ + ì‹œê°í™” ì°¨íŠ¸)

## ğŸš¨ **CRITICAL: 2025-06-29 í•´ê²°ëœ ë¬¸ì œ (ì ˆëŒ€ ë°˜ë³µ ê¸ˆì§€)**

### **1. ë¼ìš°íŒ… ì„¤ì • ì˜¤ë¥˜ (staticwebapp.config.json)**
```json
// âœ… ë°˜ë“œì‹œ ì‚¬ìš© (ìµœì í™”ëœ ì„¤ì •)
{
  "routes": [
    { "route": "/static/*", "headers": { "Cache-Control": "public, max-age=31536000, immutable" } },
    { "route": "*.css", "headers": { "content-type": "text/css" } },
    { "route": "*.js", "headers": { "content-type": "application/javascript; charset=utf-8" } }
  ],
  "navigationFallback": {
    "rewrite": "/index.html",
    "exclude": ["/static/*", "*.js", "*.css", "*.json", "*.ico", "*.png"]
  }
}
```

### **2. ê³µí†µ ì»´í¬ë„ŒíŠ¸ ì¤‘ë³µ ìƒì„± ë°©ì§€**
```javascript
// âœ… í•„ìˆ˜: shared ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©
import { CompanyInfo, GrowthChart } from '../components/shared';

// âŒ ê¸ˆì§€: ë³„ë„ ì»´í¬ë„ŒíŠ¸ ìƒì„±
// analyzeì™€ ë™ì¼í•œ CompanyInfo ì»´í¬ë„ŒíŠ¸ ë³„ë„ ìƒì„± ê¸ˆì§€
```

### **3. Analyze ì—°ê²° ìµœì í™”**
```javascript
// âœ… ì™„ì „í•œ ì—°ê²° URL (ìë™ ë¶„ì„ ì‹œì‘)
const analyzeUrl = `https://delightful-tree-001bf4c00.6.azurestaticapps.net/dashboard/${bizno}?autoAnalyze=true&expandAll=true`;

// âŒ ê¸ˆì§€: ë¶ˆì™„ì „í•œ URL
// ë‹¨ìˆœíˆ `/dashboard/${bizno}`ë§Œ ì‚¬ìš© ê¸ˆì§€
```

## ğŸ—ï¸ **ì•„í‚¤í…ì²˜ ê·œì¹™**

### **í”„ë¡œì íŠ¸ êµ¬ì¡°**
```
my-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ shared/                    # ğŸ†• ê³µí†µ ì»´í¬ë„ŒíŠ¸ (JS ë²„ì „)
â”‚   â”‚   â”‚   â”œâ”€â”€ CompanyInfo.js        # íšŒì‚¬ ì •ë³´ (analyzeì™€ ê³µìœ )
â”‚   â”‚   â”‚   â”œâ”€â”€ GrowthChart.js        # ì¸ì›ì¦ê° ì°¨íŠ¸ (analyzeì™€ ê³µìœ )
â”‚   â”‚   â”‚   â””â”€â”€ index.js              # export ëª¨ìŒ
â”‚   â”‚   â”œâ”€â”€ CompanyDetailPage.js      # ë©”ì¸ ìƒì„¸ í˜ì´ì§€ (68ì¤„ë¡œ ë‹¨ì¶•)
â”‚   â”‚   â””â”€â”€ CompanyAIInfo.jsx         # AI ë¶„ì„ ì •ë³´
â”‚   â”œâ”€â”€ pages/                        # ë¼ìš°íŒ… í˜ì´ì§€
â”‚   â””â”€â”€ services/                     # API ì„œë¹„ìŠ¤
â”œâ”€â”€ api-func/                         # Azure Functions (getSampleList)
â””â”€â”€ staticwebapp.config.json         # ë¼ìš°íŒ… ì„¤ì •
```

### **ì ‘ê·¼ ì œì–´ ì‹œìŠ¤í…œ**
```javascript
// ì ‘ê·¼ ë ˆë²¨: 'public' | 'partner' | 'premium'

// Partner ë ˆë²¨ (visual ê¸°ë³¸ê°’)
const accessLevel = 'partner';

// ì¡°ê±´ë¶€ ë Œë”ë§
{accessLevel === 'partner' && (
  <div>
    <CompanyInfo accessLevel={accessLevel} />
    <GrowthChart data={employeeData} />
  </div>
)}
```

## ğŸ”§ **ê°œë°œ ê·œì¹™**

### **1. ê³µí†µ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© í•„ìˆ˜**
```javascript
// âœ… í•„ìˆ˜: shared ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©
import { CompanyInfo, GrowthChart } from '../components/shared';

// âœ… ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© ë°©ë²•
<CompanyInfo 
  accessLevel="partner"
  companyData={companyData}
  showChart={true}
/>
```

### **2. JavaScript íƒ€ì… ì²´í¬**
```javascript
// PropTypes ì‚¬ìš© ê¶Œì¥
import PropTypes from 'prop-types';

CompanyInfo.propTypes = {
  accessLevel: PropTypes.oneOf(['public', 'partner', 'premium']),
  companyData: PropTypes.object.isRequired,
  showChart: PropTypes.bool
};
```

### **3. API ì—°ë™ ê·œì¹™**
```javascript
// API í˜¸ì¶œ ì‹œ ì—ëŸ¬ ì²˜ë¦¬ í•„ìˆ˜
const fetchCompanyData = async (bizno) => {
  try {
    const response = await fetch(`/api/getSampleList?bizno=${bizno}`);
    if (!response.ok) throw new Error(`HTTP ${response.status}`);
    const data = await response.json();
    
    // API ë²„ì „ ë¡œê¹…
    console.log('API Version:', data.apiInfo?.version);
    return data;
  } catch (error) {
    console.error('API Error:', error);
    throw error;
  }
};
```

## ğŸ¯ **ì„±ëŠ¥ ìµœì í™” ê·œì¹™**

### **1. ì»´í¬ë„ŒíŠ¸ ìµœì í™”**
```javascript
// React.memo ì‚¬ìš©ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
const CompanyDetailPage = React.memo(({ bizno }) => {
  // ì»´í¬ë„ŒíŠ¸ ë¡œì§
});

// useMemo, useCallback ì ê·¹ í™œìš©
const memoizedData = useMemo(() => {
  return processCompanyData(rawData);
}, [rawData]);
```

### **2. ë²ˆë“¤ í¬ê¸° ìµœì í™”**
- **ë¹Œë“œ í¬ê¸°**: 85kB ì´í•˜ ìœ ì§€ (gzipped)
- **ë™ì  import**: ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ì ìš©
- **ì´ë¯¸ì§€ ìµœì í™”**: WebP í˜•ì‹ ì‚¬ìš©

### **3. ìºì‹± ì „ëµ**
```javascript
// íšŒì‚¬ ë°ì´í„° ìºì‹±
const CACHE_DURATION = 5 * 60 * 1000; // 5ë¶„

const getCachedData = (key) => {
  const cached = sessionStorage.getItem(key);
  if (cached) {
    const { data, timestamp } = JSON.parse(cached);
    if (Date.now() - timestamp < CACHE_DURATION) {
      return data;
    }
  }
  return null;
};
```

## ğŸ”— **ì—°ë™ ê·œì¹™**

### **1. Analyze í”„ë¡œì íŠ¸ ì—°ê²°**
```javascript
// ì™„ì „í•œ ë¶„ì„ ì´ë™ í•¨ìˆ˜
const moveToAnalyze = (bizno) => {
  const analyzeUrl = `https://delightful-tree-001bf4c00.6.azurestaticapps.net/dashboard/${bizno}?autoAnalyze=true&expandAll=true`;
  
  // ìƒˆ íƒ­ì—ì„œ ì—´ê¸°
  window.open(analyzeUrl, '_blank');
  
  // ë¡œê¹…
  console.log(`Moving to analyze: ${bizno}`);
};
```

### **2. API ì„œë²„ í•¨ìˆ˜ ì—°ë™**
```javascript
// ë¡œì»¬ getSampleList í•¨ìˆ˜ ìš°ì„  ì‚¬ìš©
const API_ENDPOINTS = {
  local: '/api/getSampleList',
  external: 'https://taxcredit-api-func.azurewebsites.net/api/analyzeCompanyData'
};

// í´ë°± ì‹œìŠ¤í…œ
const fetchWithFallback = async (bizno) => {
  try {
    return await fetch(API_ENDPOINTS.local);
  } catch (error) {
    console.log('Falling back to external API');
    return await fetch(API_ENDPOINTS.external);
  }
};
```

## ğŸš€ **ë°°í¬ ê·œì¹™**

### **1. GitHub Actions ì„¤ì •**
```yaml
# .github/workflows/ ìœ„ì¹˜ í•„ìˆ˜
app_location: "my-app"
output_location: "build"
api_location: "api-func"  # ë¡œì»¬ í•¨ìˆ˜ ì‚¬ìš©
```

### **2. ë¹Œë“œ ì„¤ì •**
```json
// my-app/package.json
{
  "scripts": {
    "build": "react-scripts build",
    "test": "react-scripts test --watchAll=false"
  }
}
```

### **3. ë°°í¬ ê²€ì¦**
```bash
# ë¹Œë“œ í›„ ê²€ì¦ í•„ìˆ˜
cd my-app
npm run build
ls build/
curl -I https://agreeable-coast-061c8f700.6.azurestaticapps.net/
```

## ğŸ¨ **UI/UX ê·œì¹™**

### **1. Footer í‘œì‹œ ê·œì¹™**
```javascript
// ì¢Œì¸¡ í•˜ë‹¨ ê³ ì • ë°°ì¹˜
<div className="fixed bottom-4 left-4 bg-green-500 text-white px-3 py-2 rounded-lg shadow-lg text-sm">
  20250629 visual ì ìš©ë¨
</div>
```

### **2. ì ‘ê·¼ ì œì–´ UI**
```javascript
// Partner ë ˆë²¨ í‘œì‹œ
{accessLevel === 'partner' ? (
  <div>
    <CompanyInfo />
    <GrowthChart />
    <button onClick={() => moveToAnalyze(bizno)}>
      ìƒì„¸ ë¶„ì„ ë³´ê¸°
    </button>
  </div>
) : (
  <div className="text-center p-8">
    <p>Partner ì´ìƒ ë ˆë²¨ì—ì„œ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
    <button className="bg-blue-500 text-white px-4 py-2 rounded">
      ì—…ê·¸ë ˆì´ë“œ
    </button>
  </div>
)}
```

### **3. ì°¨íŠ¸ ì‹œê°í™” ê·œì¹™**
```javascript
// ê·¸ë¼ë°ì´ì…˜ ìƒ‰ìƒ ì ìš©
const chartConfig = {
  colors: {
    gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
    positive: '#10B981', // ì¦ê°€
    negative: '#EF4444', // ê°ì†Œ
    neutral: '#6B7280'   // ë³€í™” ì—†ìŒ
  }
};
```

## ğŸ§ª **í…ŒìŠ¤íŠ¸ ê·œì¹™**

### **1. ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸**
```javascript
// React Testing Library ì‚¬ìš©
import { render, screen, fireEvent } from '@testing-library/react';

test('CompanyDetailPage renders correctly', () => {
  render(<CompanyDetailPage bizno="1234567890" />);
  expect(screen.getByText('íšŒì‚¬ ì •ë³´')).toBeInTheDocument();
});
```

### **2. API í…ŒìŠ¤íŠ¸**
```javascript
// Mock API ì‘ë‹µ
const mockApiResponse = {
  success: true,
  data: { /* í…ŒìŠ¤íŠ¸ ë°ì´í„° */ },
  apiInfo: { version: 'v1.0.1' }
};

// API í˜¸ì¶œ í…ŒìŠ¤íŠ¸
jest.mock('../services/apiService', () => ({
  fetchCompanyData: jest.fn(() => Promise.resolve(mockApiResponse))
}));
```

## ğŸ›¡ï¸ **ë³´ì•ˆ ê·œì¹™**

### **1. ë°ì´í„° ê²€ì¦**
```javascript
// ì‚¬ì—…ìë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
const validateBizno = (bizno) => {
  const regex = /^\d{10}$/;
  return regex.test(bizno);
};

// XSS ë°©ì§€
const sanitizeInput = (input) => {
  return input.replace(/[<>\"']/g, '');
};
```

### **2. ë¯¼ê° ì •ë³´ ì²˜ë¦¬**
```javascript
// ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹
const maskPersonalInfo = (info) => {
  if (info.length <= 4) return info;
  return info.substring(0, 2) + '*'.repeat(info.length - 4) + info.substring(info.length - 2);
};
```

## ğŸ“Š **ëª¨ë‹ˆí„°ë§ ê·œì¹™**

### **1. ì„±ëŠ¥ ì¸¡ì •**
```javascript
// í˜ì´ì§€ ë¡œë”© ì‹œê°„ ì¸¡ì •
const measurePageLoad = () => {
  const startTime = performance.mark('page-start');
  
  window.addEventListener('load', () => {
    performance.mark('page-end');
    performance.measure('page-load', 'page-start', 'page-end');
    
    const measure = performance.getEntriesByName('page-load')[0];
    console.log(`Page load time: ${measure.duration}ms`);
  });
};
```

### **2. ì—ëŸ¬ ì¶”ì **
```javascript
// ì „ì—­ ì—ëŸ¬ í•¸ë“¤ëŸ¬
window.addEventListener('unhandledrejection', (event) => {
  console.error('Unhandled Promise Rejection:', event.reason);
  // ì—ëŸ¬ ë¡œê¹… ì„œë¹„ìŠ¤ë¡œ ì „ì†¡
});
```

## ğŸ”„ **Git ì‘ì—… ê·œì¹™**

### **1. ì»¤ë°‹ ë©”ì‹œì§€**
```bash
# í˜•ì‹: type(scope): description
feat(components): add shared CompanyInfo component
fix(routing): resolve SPA navigation issue
perf(api): optimize getSampleList function
```

### **2. ë¸Œëœì¹˜ ì „ëµ**
```bash
# feature ë¸Œëœì¹˜ì—ì„œ ê°œë°œ
git checkout -b feature/shared-components

# ì™„ë£Œ í›„ masterë¡œ ë³‘í•©
git checkout master
git merge feature/shared-components
git push origin master  # ìë™ ë°°í¬
```

## ğŸ“ˆ **ì„±ê³¼ ì¸¡ì • ê·œì¹™**

### **1. ì½”ë“œ í’ˆì§ˆ**
- **ì½”ë“œ ë‹¨ì¶•ë¥ **: 87% (468ì¤„ â†’ 68ì¤„)
- **ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©**: 100% (analyzeì™€ ê³µìœ )
- **ESLint ê²½ê³ **: 0ê°œ ìœ ì§€

### **2. ì„±ëŠ¥ ì§€í‘œ**
- **ì´ˆê¸° ë¡œë”©**: 2.5ì´ˆ ì´í•˜
- **í˜ì´ì§€ ì „í™˜**: 500ms ì´í•˜
- **API ì‘ë‹µ**: 1.2ì´ˆ ì´í•˜

---

## âš ï¸ **ì¤‘ìš” ê¸ˆì§€ì‚¬í•­**

1. **ë¼ìš°íŒ… ì„¤ì • ì„ì˜ ë³€ê²½ ê¸ˆì§€**: staticwebapp.config.json ê³ ì •
2. **ê³µí†µ ì»´í¬ë„ŒíŠ¸ ì¤‘ë³µ ìƒì„± ê¸ˆì§€**: shared í´ë” ì‚¬ìš© í•„ìˆ˜
3. **ë¶ˆì™„ì „í•œ analyze ì—°ê²° ê¸ˆì§€**: autoAnalyze=true íŒŒë¼ë¯¸í„° í•„ìˆ˜
4. **API ì—ëŸ¬ ì²˜ë¦¬ ìƒëµ ê¸ˆì§€**: try-catch ë¸”ë¡ í•„ìˆ˜
5. **ë¹Œë“œ í…ŒìŠ¤íŠ¸ ìƒëµ ê¸ˆì§€**: ë°°í¬ ì „ ë°˜ë“œì‹œ ê²€ì¦

---

## ğŸ¯ **ë‹¤ìŒ ê°œë°œ ìš°ì„ ìˆœìœ„**

### **1. ë‹¨ê¸° ëª©í‘œ**
- [ ] Footer í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ (20250615 â†’ 20250629)
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜• ìµœì í™”
- [ ] ë¡œë”© ì„±ëŠ¥ ê°œì„ 

### **2. ì¤‘ì¥ê¸° ëª©í‘œ**
- [ ] Premium ë ˆë²¨ ê¸°ëŠ¥ ì¶”ê°€
- [ ] ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ
- [ ] PWA ì§€ì› ì¶”ê°€

---

**ğŸ“Œ ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-06-29 00:50 | **ë²„ì „**: v0.2.1 | **ìƒíƒœ**: ï¿½ï¿½ Production Ready 