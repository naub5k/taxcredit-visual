---
title: 2025-05-03-009_빌드환경비교_및_원인추적요청서
status: 요청
owner: Cursor
assignee: GPT
created: 2025-05-03
context: taxcredit_mobileapp/my-app
---

## ✅ 요청 목적

성공 커밋(`6ae30d7`)과 현재 커밋(`query-integration` 또는 `master`) 간 GitHub Actions 빌드 성공/실패의 원인을 파악하기 위해  
워크플로우, 빌드 스크립트, package.json의 차이를 비교하고 원인을 단계적으로 제거하는 요청입니다.

---

## ▶️ 비교 분석 요약

| 항목 | 성공 커밋 (6ae30d7) | 현재 커밋 (HEAD) | 차이 여부 |
|------|----------------------|-------------------|-----------|
| Node.js 버전 | 20.x | 20.x | ❌ 없음 |
| 워크플로우 구조 | 설치 + 빌드 통합 | 설치 / 권한 / 빌드 분리 | ✅ 있음 |
| 권한 설정 (`chmod`) | 없음 | 있음 | ✅ 있음 |
| `build` 실행 방식 | `react-scripts build` | `node ./node_modules/.bin/react-scripts` | ✅ 있음 |
| package.json `homepage` | 없음 | `"."` 추가됨 | ✅ 있음 |
| pre/post 스크립트 | 없음 | `prebuild`, `postbuild`, `verify-build` 추가됨 | ✅ 있음 |

---

## ▶️ 원인 후보군

- GitHub Actions 런타임 환경 변경
- package.json 내 `homepage`, 빌드 스크립트 복잡도 증가
- 실행 방식 변경에 따른 권한 처리 차이

---

## ✅ 요청 내역

1. **package.json 복원 요청**  
   → 성공 커밋 기준의 package.json으로 되돌림

```bash
git checkout 6ae30d7 -- package.json
npm install
npm run build
```

2. **GitHub Actions 확인**  
   → 커밋 후 `git push origin query-integration`  
   → GitHub Actions 실행 확인 (빌드 성공 여부)

3. **변화 없음 시 후속 조치 예정**  
   → `.yml` 구조 단순화 (권한 제거, 실행 방식 복귀 등)

---

## ▶️ 후속 분기 조건

- 복원된 package.json 기준 빌드 성공 시  
  → `stable-deploy` 기준 문서화 예정
- 실패 지속 시  
  → Node.js 실행 권한 문제 또는 `.bin` 경로 정책 재검토

---

이 요청서는 빌드 실패 원인을 최소화하고, 성공한 구조를 기준으로 단계를 되돌리기 위한 것입니다.
